package tickMath

import (
	"math/big"
	"testing"
)

var (
	// Test inputs for the getSqrtRatioAtTick function.
	getSqrtRatioAtTickInputs = [...]int{
		-605490,
		306435,
		795199,
		714479,
		-754928,
		-352354,
		-639979,
		151730,
		708581,
		55379,
		103098,
		479217,
		-91162,
		766800,
		-446965,
		-690435,
		135837,
		-827824,
		865454,
		-69784,
	}
	// Test outputs for the getSqrtRatioAtTick function. To be converted to
	// big.Ints.
	getSqrtRatioAtTickOutputsStrings = [...]string{
		"5642721942098613",
		"357024793347176040098758073744472598",
		"14640069913673683022118270373753038941211362350",
		"258713002688033585140685610797793303133093091",
		"3211041733340",
		"1770077280900890172857",
		"1006020832475117",
		"156131288181857195385307075932564",
		"192642105850343801639492348401608095410822540",
		"1262871511813689486900606186164",
		"13724997649175287121978152899130",
		"2015692370062636309172520184117127683240",
		"830655370063815383322100753",
		"3539138290718651736992881117902513786070984607",
		"15618638830384903494",
		"80727895949757",
		"70533443559749144576888219566265",
		"83909003404",
		"490947235291057771851277398888386102982029559644",
		"2418883986714335308443808732",
	}
	// Test inputs for the getTickAtSqrtRatio function. To be converted to
	// big.Ints.
	getTickAtSqrtRatioInputsStrings = [...]string{
		"1453307595472919455617204065685423346581090296651",
		"1253366006030963701028192554292325710120355164305",
		"848041822780204131353347584481729541414277062990",
		"1335344709074489154092336187984246178546961155545",
		"189964318199795839444690382865427686169778283855",
		"1324243769468097837310902853177167749488901613907",
		"1228573406243697365407589369799193204886930229709",
		"171633959934545846250298242348433349004177565906",
		"931726318066707770612844473046468110417281302347",
		"1235879074459700530429390056846970240329072970339",
		"922299647780975310755426093663400300171732151755",
		"355278970385610000213353829794126952317683457427",
		"863010139696156956761689372269691406058791647621",
		"1042849302993682434819611954709302497425247903002",
		"1099353957664670659937282391490080293632191483002",
		"220701008266987570220315932250588232082170288054",
		"1245439514657923601500135022017092924264839674324",
		"1439122357718129831501123110984692036721356525856",
		"766571580088247956696388160844258972513943383953",
		"125375333388094191587963815152414411209302010814",
	}
	// Test outputs for the getTickAtSqrtRatio function.
	getTickAtSqrtRatioOutputs = [...]int{
		884691,
		879478,
		845505,
		874922,
		876079,
		868045,
		874430,
		886669,
		833430,
		885444,
		860279,
		834014,
		839778,
		863483,
		865336,
		868931,
		877399,
		885778,
		861017,
		868983,
	}
	// Slice to store the big.Int outputs for the getSqrtRatioAtTick function.
	getSqrtRatioAtTickOutputs []*big.Int
	// Slice to store the big.Int inputs for the getTickAtSqrtRatioInputs.
	getTickAtSqrtRatioInputs []*big.Int
)

func init() {
	for _, input := range getTickAtSqrtRatioInputsStrings {
		temp := new(big.Int)
		temp.SetString(input, 10)
		getTickAtSqrtRatioInputs = append(getTickAtSqrtRatioInputs, temp)
	}

	for _, output := range getSqrtRatioAtTickOutputsStrings {
		temp := new(big.Int)
		temp.SetString(output, 10)
		getSqrtRatioAtTickOutputs = append(getSqrtRatioAtTickOutputs, temp)
	}
}

// func TestGetTickAtSqrtRatio(t *testing.T) {
// 	for i, input := range getTickAtSqrtRatioInputs {
// 		output := GetTickAtSqrtRatio(input)
// 		if output != getTickAtSqrtRatioOutputs[i] {
// 			t.Errorf("GetTickAtSqrtRatio(%s) = %d, want %d", input, output, getTickAtSqrtRatioOutputs[i])
// 		}
// 	}
// }

func TestGetSqrtRatioAtTick(t *testing.T) {
	for i, input := range getSqrtRatioAtTickInputs {
		output := GetSqrtRatioAtTick(input)
		if output.Cmp(getSqrtRatioAtTickOutputs[i]) != 0 {
			t.Errorf("GetSqrtRatioAtTick(%d) = %v, want %v", input, output, getSqrtRatioAtTickOutputs[i])
		}
	}
}
